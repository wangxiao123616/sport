<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--对应模板文件，namespace对应javaMapper文件-->
<mapper namespace="com.example.sport.mapper.CardMapper">
    <!--对类文件，id下方引用，type对应entity-->
    <resultMap id="card" type="com.example.sport.domain.entity.Card">
        <!--实体类与数据库字段对应-->
        <id column="id" property="id"/>
        <result column="money" property="money"/>
        <result column="c_password" property="cPassword"/>
        <result column="phone" property="phone"/>
        <result column="date" property="date"/>

    </resultMap>

    <sql id="cardVo">
        SELECT c.id, c.money, c.c_password, c.phone, c.date
        from card c
    </sql>

    <select id="getCards" resultType="com.example.sport.domain.entity.Card" resultMap="card">
        <include refid="cardVo"/>
        <where>
            <if test="id != 0">
                and c.id = id
            </if>
            <if test="money != -1">
                and c.money <![CDATA[>=]]> money and c.money <![CDATA[<=]]> money
            </if>
            <if test="cPassword != null">
                and c.c_password = cPassword
            </if>
            <if test="phone != null">
                and c.phone = phone
            </if>
            <if test="date != null">
                and c.date <![CDATA[>=]]> date and c.date <![CDATA[<=]]> date
            </if>
        </where>
    </select>
    <select id="getCard" resultType="com.example.sport.domain.entity.Card">
        <include refid="cardVo"></include>
        <where>
            c.phone = phone
        </where>
    </select>

    <insert id="addOne">
        insert into card(money, c_password, phone, date)
            value (money,cPassword,phone,date)
    </insert>

    <delete id="deleteOne">
        delete from card c
        <where>
            c.phone = phone
        </where>
    </delete>
</mapper>